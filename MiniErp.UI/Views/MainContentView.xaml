<UserControl x:Class="MiniErp.UI.Views.MainContentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:category="clr-namespace:MiniErp.UI.Views.Category"
             xmlns:wh="clr-namespace:MiniErp.UI.Views.WarehouseManagement"
             xmlns:vm="clr-namespace:MiniErp.UI.ViewModels"
             xmlns:local="clr-namespace:MiniErp.UI.CustomControls"
             xmlns:rp="clr-namespace:MiniErp.UI.Views.Report"
             xmlns:usr="clr-namespace:MiniErp.UI.Views.Users"
             mc:Ignorable="d" 
              xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
             d:DesignHeight="450" d:DesignWidth="800">
    <b:Interaction.Triggers>
        <b:EventTrigger EventName="Loaded">
            <b:InvokeCommandAction
                Command="{Binding LoadCommand}"/>
        </b:EventTrigger>
    </b:Interaction.Triggers>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition MinWidth="100px" MaxWidth="200px"/>
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <TreeView Grid.Column="0" Grid.RowSpan="2">
            <TreeView.Resources>
                <Style TargetType="{x:Type TreeViewItem}">
                    <Setter Property="Margin" Value="2,2,2,2">
                    </Setter>
                </Style>
            </TreeView.Resources>
            <TreeViewItem IsExpanded="True">
                <TreeViewItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <!--<Image Source="../Resources/options.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>-->
                        <TextBlock Text="{DynamicResource Category}" />
                        <Image Source="../Resources/category-alt.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                        <TextBlock Text="Danh mục" />
                    </StackPanel>
                </TreeViewItem.Header>
                <TreeViewItem IsExpanded="True">
                    <TreeViewItem.Header>
                        <Button Background="Transparent" Command="{Binding CurrencyCommand}" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/usd-circle.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Tỉ giá" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
                <TreeViewItem IsExpanded="True">
                    <TreeViewItem.Header>
                        <Button Background="Transparent" Command="{Binding ProductCommand}" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/Product.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Sản phẩm" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
                <TreeViewItem IsExpanded="True">
                    <TreeViewItem.Header>
                        <Button Background="Transparent" Command="{Binding CustomerCommand}" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/Customer.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Khách hàng" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
                <TreeViewItem IsExpanded="True">
                    <TreeViewItem.Header>
                        <Button Background="Transparent" Command="{Binding ProviderCommand}" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/house-window.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Nhà cung cấp" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
                <TreeViewItem IsExpanded="True">
                    <TreeViewItem.Header>
                        <Button Command="{Binding UnitCommand}" Background="Transparent" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/bacterium.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Đơn vị tính" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
                <TreeViewItem IsExpanded="True" Visibility="Collapsed">
                    <TreeViewItem.Header>
                        <Button Background="Transparent" Command="{Binding RoleCommand}" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/options.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Chức vụ" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
            </TreeViewItem>
            <TreeViewItem IsExpanded="True">
                <TreeViewItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="../Resources/function-process.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                        <TextBlock Text="Quản lý kho" />
                    </StackPanel>
                </TreeViewItem.Header>
                <TreeViewItem IsExpanded="True">
                    <TreeViewItem.Header>
                        <Button Background="Transparent" Command="{Binding ReceiveNoteCommand}" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/inputInventory.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Nhập kho" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
                <TreeViewItem IsExpanded="True">
                    <TreeViewItem.Header>
                        <Button Background="Transparent" Command="{Binding DeliveryNoteCommand}" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/outputInventory.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Xuất kho" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
                <TreeViewItem IsExpanded="True">
                    <TreeViewItem.Header>
                        <Button Command="{Binding InventoryCommand}" Background="Transparent" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/inventory-alt.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Tồn kho" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
            </TreeViewItem>
            <TreeViewItem IsExpanded="True">
                <TreeViewItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="../Resources/user-gear.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                        <TextBlock Text="Nhân sự/Chấm công" />
                    </StackPanel>
                </TreeViewItem.Header>
                <TreeViewItem IsExpanded="True">
                    <TreeViewItem.Header>
                        <Button Command="{Binding UserCommand}" Background="Transparent" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/employee-man.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Nhân sự" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
                <TreeViewItem IsExpanded="True">
                    <TreeViewItem.Header>
                        <Button Command="{Binding TimeKeepingCommand}" Background="Transparent" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="../Resources/fingerprint.png" Height="16" Width="16" Margin="0, 0, 4, 0"></Image>
                                <TextBlock Text="Chấm công" />
                            </StackPanel>
                        </Button>
                    </TreeViewItem.Header>
                </TreeViewItem>
            </TreeViewItem>
            <TreeViewItem IsExpanded="True">
            </TreeViewItem>
        </TreeView>
        <Grid Grid.Column="1">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <ComboBox ItemsSource="{Binding Languages}" SelectedItem="{Binding Language}"  IsSynchronizedWithCurrentItem="True">
                    <ComboBox.ItemTemplate>
                        <ItemContainerTemplate>
                            <StackPanel>
                                <Image Source="{Binding Icon}"></Image>
                                <!--<TextBlock ><Run Text="{Binding Language}"/></TextBlock>-->
                            </StackPanel>
                        </ItemContainerTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <TextBlock Margin="0 1 0 5" Text="Xin chào, "/>
                <TextBlock Margin="0 1 0 5" Text="{Binding CurrentUser.UserCredential.User.Info.DisplayName}"/>
                <Button Content="Đăng xuất" Margin="10 0 10 5" Command="{Binding LogoutCommand}"></Button>
            </StackPanel>
        </Grid>
        <Grid x:Name="MainContent" Grid.Column="1" Grid.Row="1">
            <Grid.Resources>
                <DataTemplate DataType="{x:Type vm:CustomerViewModel}">
                    <category:CustomerView />
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:CurrencyViewModel}">
                    <category:CurrencyView />
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:ProductViewModel}">
                    <category:ProductView />
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:ProviderViewModel}">
                    <category:ProviderView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:RoleViewModel}">
                    <category:RoleView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:UnitViewModel}">
                    <category:UnitView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:ReceiveNoteMainViewModel}">
                    <wh:ReceiveNoteMainView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:ReceiveNoteViewModel}">
                    <wh:ReceiveNoteView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:DeliveryNoteMainViewModel}">
                    <wh:DeliveryNoteMainView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:DeliveryNoteViewModel}">
                    <wh:DeliveryNoteView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:SelectDeliveryProductViewModel}">
                    <wh:SelectDeliveryProductView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:SelectReceiveProductViewModel}">
                    <wh:SelectReceiveProductView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:ReportViewerViewModel}">
                    <rp:ReportViewer/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:InventoryViewModel}">
                    <wh:InventoryView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:UserMainViewModel}">
                    <usr:UserMainView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:UserViewModel}">
                    <usr:UserView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:TimeKeepingViewModel}">
                    <usr:TimeKeepingView/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type vm:RegisterFingersprintViewModel}">
                    <usr:RegisterFingersprintView/>
                </DataTemplate>
            </Grid.Resources>

            <ContentControl Content="{Binding CurrentViewModel}" />
            <local:LoadingSpinner Visibility="Hidden"/>
        </Grid>
    </Grid>
</UserControl>
